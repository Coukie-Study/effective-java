# 아이템 2. 생성자에 매개변수가 많다면 빌더를 고려하라.
## 점층적 생성자 패턴(Telescoping constructor pattern)이란?
- 필수 매개변수만 받는 생성자
- 필수 매개변수와 선택 매개변수 1개를 받는 생성자
- 필수 매개변수와 선택 매개변수 2개를 받는 생성자

위와 같은 형식으로 생성자의 매개변수를 점층적으로 늘리는 방식.

## 점층적 생성자 패턴의 문제점
#### 1. 설정하길 원치 않는 매개변수까지 포함하여 생성해야 한다.
점층적 생성자 패턴을 이용하여 인스턴스를 생성하려면 원하는 매개변수를<br>모두 포함한 생성자 중 가장 짧은 것을
골라 호출해야 하므로 원치 않는 매개변수까지 포함하여 생성이 될 경우가 있다.
#### 2. 의도하지 않은 인스턴스가 생성될 수 있다.
매개변수의 자료형이 동일한 경우 생성자에 대입하는 매개변수의 순서를 외워야 하므로<br>
순서에 맞지 않게 생성자에 매개변수를 전달하면 의도하지 않은 인스턴스가 생성 될 수 있다.

## 자바빈즈 패턴(JavaBeans pattern)이란?
매개변수가 없는 생성자로 객체를 만든 후, 세터 메서드들을 호출해 원하는 매개변수의 값을 설정하는 방식. 

## 자바빈즈 패턴의 문제점
#### 1. 한개의 객체를 생성하기 위해 많은 메서드들을 호출해야한다.
#### 2. 객체가 완전히 생성되기 전까지는 일관성이 무너진 상태에 놓이게 된다.
세터 메서드의 호출로 객체의 필드 값을 계속 변화시키므로 완전히 생성하기 전까진 데이터의 일관성이 무너진다.<br> 
또한 세터로 값을 설정하기 때문에 필드에 final 선언을 할 수 없어 클래스를 불변으로 만들 수 없다.

## 빌더 패턴(Builder pattern)이란?
1. 정적 클래스로 내부에 빌더 클래스를 선언한다.
1. 필수 변수만 매개변수로 받는 빌더 생성자를 만든다.
1. 원하는 선택 매개변수들을 빌더의 세터 메서들로 설정한다.
1. 매개변수가 없는 build 메서드를 호출해 원하는 객체를 반환한다.

위의 과정을 통해 객체를 생성하는 방식(예제코드 ch1.item2.builder.NutritionFacts 참고)

#### 빌더 패턴에서의 잘못된 매개변수를 발견하는 절차
1. 빌더의 생성자와 메서드에서 입력 매개변수를 검사한다.
1. build 메서드가 호출하는 생성자에서 여러 매개변수에 걸친 *불변식을 검사한다.
1. 빌더로부터 매개변수를 복사한 후 해당 객체 필드들 또한 검사한다.
1. 잘못된 점을 발견하면 에러 메세지를 담은 IllegalArgumentException을 던진다.

불변식 : 프로그램이 실행되는 동안 혹은 정해진 기간 동안 반드시 반족해야 하는 조건.

#### 빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기 좋다.
예제코드 item2.builder 참고

#### 빌더 패턴의 단점
1. 객체를 만들기 앞서 빌더부터 만들어야 한다.
1. 코드가 장황하기 때문에 매개변수가 4개 이상은 돼야 값어치가 있다.<br>
   하지만 API는 시간이 지날수록 매개변수가 많아질 수 있어 애초에 빌더로 시작하는편이 나을 때가 많다.
